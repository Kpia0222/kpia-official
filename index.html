<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Kpia Official</title>
<style>
*{margin:0;padding:0;box-sizing:border-box;}
body,html{width:100%;height:100%;overflow:hidden;font-family:'Arial',sans-serif;background-color:#111;}

#background{position:fixed;top:0;left:0;width:100%;height:100%;background:url('assets/background.png') center/cover no-repeat;filter:blur(8px) brightness(0.6);opacity:0;transition:opacity 5s ease;}
#noise{position:fixed;top:0;left:0;width:100%;height:100%;background:url('assets/noise.png') repeat;opacity:0.15;pointer-events:none;}
#metallic{position:fixed;top:0;left:0;width:100%;height:100%;background:linear-gradient(120deg, rgba(255,255,255,0.08), rgba(255,255,255,0.25), rgba(255,255,255,0.08));background-size:200% 200%;animation:shine 5s linear infinite;pointer-events:none;}
@keyframes shine{0%{background-position:0% 0%;}100%{background-position:100% 100%;}}

canvas#effectCanvas{position:fixed;top:0;left:0;width:100%;height:100%;pointer-events:none;}

.geo{position:absolute;border:1px solid rgba(255,255,255,0.3);opacity:0.7;pointer-events:none;animation:geoAnim 8s linear infinite;}
@keyframes geoAnim{0%{transform:rotate(0deg) scale(1);}50%{transform:rotate(180deg) scale(1.4);}100%{transform:rotate(360deg) scale(1);}}

#icon{position:absolute;top:50%;left:50%;width:150px;height:150px;transform:translate(-50%,-50%);background:url('assets/logo.png') center/contain no-repeat;opacity:0;transition:opacity 5s ease;cursor:pointer;border-radius:50%;box-shadow:0 0 50px rgba(255,255,255,0.7);}
@media(min-width:768px){#icon{width:180px;height:180px;}}@media(max-width:767px){#icon{width:120px;height:120px;}}

#icon.glitch::before,#icon.glitch::after{content:'';position:absolute;top:0;left:0;width:100%;height:100%;background:url('assets/logo.png') center/contain no-repeat;mix-blend-mode:screen;opacity:0.8;}
#icon.glitch::before{left:2px;clip:rect(0,150px,50px,0);animation:glitchTop 2s infinite linear;}
#icon.glitch::after{left:-2px;clip:rect(50px,150px,150px,0);animation:glitchBottom 3s infinite linear;}
@keyframes glitchTop{0%{transform:translate(0,0);}20%{transform:translate(-2px,2px);}40%{transform:translate(2px,-2px);}60%{transform:translate(-2px,1px);}80%{transform:translate(1px,-1px);}100%{transform:translate(0,0);}}
@keyframes glitchBottom{0%{transform:translate(0,0);}20%{transform:translate(2px,-2px);}40%{transform:translate(-2px,2px);}60%{transform:translate(2px,-1px);}80%{transform:translate(-1px,1px);}100%{transform:translate(0,0);}}

#sns{position:absolute;top:calc(50% + 120px);left:50%;transform:translateX(-50%);display:flex;gap:15px;}
#sns a{width:50px;height:50px;border-radius:50%;background-color:rgba(255,255,255,0.12);display:flex;justify-content:center;align-items:center;transition:all 0.3s;filter:drop-shadow(0 0 8px rgba(255,255,255,0.4));}
#sns a:hover{background-color:rgba(255,255,255,0.25);transform:scale(1.3) rotate(10deg);filter:drop-shadow(0 0 20px rgba(255,255,255,0.7));}
#sns img{width:60%;height:60%;}
</style>
</head>
<body>
<div id="background"></div>
<div id="noise"></div>
<div id="metallic"></div>
<canvas id="effectCanvas"></canvas>
<div id="icon" class="glitch"></div>

<div id="sns">
  <a href="#"><img src="assets/twitter.png" alt="Twitter"></a>
  <a href="#"><img src="assets/instagram.png" alt="Instagram"></a>
  <a href="#"><img src="assets/youtube.png" alt="YouTube"></a>
</div>

<script>
const icon=document.getElementById('icon');
const canvas=document.getElementById('effectCanvas');
const ctx=canvas.getContext('2d');
const bgImg=new Image();
bgImg.src='assets/background.png';
canvas.width=window.innerWidth;
canvas.height=window.innerHeight;

// フェードイン
window.addEventListener('load',()=>{
  document.getElementById('background').style.opacity='1';
  document.getElementById('icon').style.opacity='1';
  animateFloat();
  createGeoShapes(15); // 数量増加
  initDroplets();
});

// アイコン浮遊
function animateFloat(){
  let angle=0,radius=20;
  function float(){
    angle+=0.02;
    let x=Math.sin(angle)*radius;
    let y=Math.cos(angle)*radius;
    icon.style.transform=`translate(-50%,-50%) translate(${x}px,${y}px)`;
    requestAnimationFrame(float);
  }
  float();
}

// アイコンマウス追従
document.addEventListener('mousemove',(e)=>{
  const rect=icon.getBoundingClientRect();
  const iconX=rect.left+rect.width/2;
  const iconY=rect.top+rect.height/2;
  const dx=e.clientX-iconX;
  const dy=e.clientY-iconY;
  const distance=Math.sqrt(dx*dx+dy*dy);
  const maxDistance=150;
  let offsetX=0,offsetY=0;
  if(distance<maxDistance){
    const factor=(maxDistance-distance)/maxDistance;
    offsetX=dx*0.25*factor;
    offsetY=dy*0.25*factor;
  }
  icon.style.transform=`translate(-50%,-50%) translate(${offsetX}px,${offsetY}px)`;
});

// 幾何学オーバーレイ
function createGeoShapes(count){
  for(let i=0;i<count;i++){
    let div=document.createElement('div');
    div.className='geo';
    div.style.width=div.style.height=(50+Math.random()*120)+'px';
    div.style.top=Math.random()*100+'%';
    div.style.left=Math.random()*100+'%';
    div.style.borderRadius=Math.random()*50+'%';
    div.style.animationDuration=(4+Math.random()*4)+'s';
    document.body.appendChild(div);
  }
}

// 水滴波紋（背景拡大表現）
let droplets=[];
function initDroplets(){
  for(let i=0;i<5;i++){ createDroplet(); }
  animateDroplets();
}
function createDroplet(){
  droplets.push({
    x:Math.random()*canvas.width,
    y:Math.random()*canvas.height,
    radius:0,
    maxRadius:30+Math.random()*20,
    alpha:0.6,
    speed:0.5+Math.random()*0.7
  });
}
function animateDroplets(){
  ctx.clearRect(0,0,canvas.width,canvas.height);
  ctx.drawImage(bgImg,0,0,canvas.width,canvas.height); // 背景描画
  // ノイズ・メタリックはCSSで対応

  droplets.forEach((d,i)=>{
    d.radius+=d.speed;
    d.alpha-=0.008;
    // 波紋部分を背景から切り取り拡大
    let scale=1 + 0.05*(d.radius/d.maxRadius); // 拡大率
    let sx=d.x-(d.radius/scale);
    let sy=d.y-(d.radius/scale);
    let sSize=d.radius*2/scale;
    ctx.save();
    ctx.globalAlpha=d.alpha;
    ctx.beginPath();
    ctx.arc(d.x,d.y,d.radius,0,Math.PI*2);
    ctx.clip();
    ctx.drawImage(bgImg,sx,sy,sSize,sSize,d.x-d.radius*scale,d.y-d.radius*scale,d.radius*2*scale,d.radius*2*scale);
    ctx.restore();

    if(d.alpha<=0){droplets.splice(i,1); createDroplet();}
  });
  requestAnimationFrame(animateDroplets);
}

</script>
</body>
</html>
